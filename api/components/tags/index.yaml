search:
  message:
    intent:
      fulfillment: &fulfillments
        $ref: "./tag-group.yaml#/fulfillments"
      tags:
        $ref: "./tag-group.yaml#/tags"
on_search:
  message:
    catalog:
      bpp/descriptor:
        tags:
          $ref: "./tag-group.yaml#/descriptor_tags"
      bpp/providers:
        fulfillments:
          $ref: "./tag-group.yaml#/fulfillment_tags"
      tags:
        $ref: "./tag-group.yaml#/tags"
init:
  message:
    order:
      fulfillments:
        tags:
          - code: linked_provider
            list:
              $ref: "./tag.yaml#/linked_provider"
      tags:
        $ref: "./tag-group.yaml#/bap_terms"
on_init:
  message:
    order:
      fulfillments:
        tags:
          - code: linked_provider
            list:
              $ref: "./tag.yaml#/linked_provider"
      tags:
        $ref: "./tag-group.yaml#/bpp_terms"
confirm:
  message:
    order:
      fulfillments:
        $ref: "./tag-group.yaml#/confirm_fulfillments"
      tags:
        $ref: "./tag-group.yaml#/bap_terms"
on_confirm:
  message:
    order:
      fulfillments:
        $ref: "./tag-group.yaml#/on_confirm_fulfillments"
      tags:
        - code: bpp_terms
          description: Describes the bpp terms and conditions.
          reference: <PR/Issue/Discussion Links md format text>
          list:
            $ref: "./tag.yaml#/bpp_terms"
        - code: bap_terms
          description: Describes the bap terms and conditions.
          reference: <PR/Issue/Discussion Links md format text>
          list:
            $ref: "./tag.yaml#/bap_terms"
update:
  message:
    order:
      fulfillments:
        $ref: "./tag-group.yaml#/update_fulfillments"
on_update:
  message:
    order:
      fulfillments:
        $ref: "./tag-group.yaml#/on_update_fulfillments"

on_cancel:
  message:
    order:
      fulfillments:
        $ref: "./tag-group.yaml#/on_cancel_fulfillments"

on_cancel_rto:
  message:
    order:
      fulfillments:
        $ref: "./tag-group.yaml#/on_cancel_rto_fulfillments"

on_track:
  message:
    tracking:
      tags:
        - code: order
          description: Describes the order information.
          reference: <PR/Issue/Discussion Links md format text>
          list:
            - code: id
              description: Describes the order id to be tracked.
              reference: <PR/Issue/Discussion Links md format text>
        - code: config
          description: Describes whether tracking is by gps (point-to-point hyperlocal) or url (non-hyperlocal).
          reference: <PR/Issue/Discussion Links md format text>
          list:
            - code: attr
              description: can be "tracking.location.gps", "tracking.url"
              reference: <PR/Issue/Discussion Links md format text>
            - code: type
              description: "live_poll tracking.location.gps or for deferred tracking.url"
              reference: <PR/Issue/Discussion Links md format text>
        - code: path
          description: Describes the origin of the order's journey.
          reference: <PR/Issue/Discussion Links md format text>
          list:
            - code: lat_lng
              description: Describes the latitude and longitude of the driver.
              reference: <PR/Issue/Discussion Links md format text>
            - code: sequence
              description: Describes the sequence.
              reference: <PR/Issue/Discussion Links md format text>

on_status:
  message:
    order:
      fulfillments:
        $ref: "./tag-group.yaml#/on_status_fulfillments"             
